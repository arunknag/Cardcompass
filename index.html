<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CardCompass - Reward Points Advisor</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles if needed */
        body {
            font-family: 'Inter', sans-serif;
        }
        .highlight-card {
            /* Updated to violet for violet theme */
            border: 2px solid #7C3AED; /* Tailwind violet-600 */
            box-shadow: 0 0 15px rgba(124, 58, 237, 0.3); /* Tailwind violet-600 with opacity */
        }
        /* Basic styling for the modal */
        .modal {
            transition: opacity 0.25s ease;
        }
        .modal-active {
            display: flex;
        }
        .modal-inactive {
            display: none;
        }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="bg-gray-100 text-gray-800 min-h-screen flex flex-col">

    <header class="bg-violet-800 text-white shadow-lg">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-4">
            <h1 class="text-2xl sm:text-3xl font-bold text-center">CardCompass</h1>
            <p class="text-center text-lg sm:text-xl italic">Maximise rewards, realise dreams</p>
        </div>
    </header>

    <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 flex-grow">
        <div class="bg-white p-6 sm:p-8 rounded-xl shadow-xl max-w-3xl mx-auto">
            <div class="mb-8 space-y-6">
                <div>
                    <label for="pointsBalance" class="block text-sm font-medium text-gray-700 mb-1">Your Current Reward Points:</label>
                    <input type="number" id="pointsBalance" name="pointsBalance" placeholder="e.g., 50000" class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-violet-500 focus:border-violet-500 sm:text-sm">
                </div>

                <div>
                    <label for="redemptionCategory" class="block text-sm font-medium text-gray-700 mb-1">Select Redemption Category:</label>
                    <select id="redemptionCategory" name="redemptionCategory" class="mt-1 block w-full px-4 py-3 pr-10 border border-gray-300 bg-white rounded-lg shadow-sm focus:outline-none focus:ring-violet-500 focus:border-violet-500 sm:text-sm">
                        </select>
                </div>

                <button id="findRecommendations" class="w-full bg-violet-600 hover:bg-violet-700 text-white font-semibold py-3 px-4 rounded-lg shadow-md transition duration-150 ease-in-out focus:outline-none focus:ring-2 focus:ring-violet-500 focus:ring-opacity-50">
                    Find Best Redemptions
                </button>
            </div>

            <div id="resultsSection" class="mt-10">
                <h2 class="text-xl sm:text-2xl font-semibold text-gray-800 mb-6 text-center" id="resultsTitle"></h2>
                <div id="recommendationsList" class="space-y-6">
                    </div>
                <p id="noResultsMessage" class="text-center text-gray-600 py-4 hidden"></p>
            </div>
        </div>
    </main>

    <footer class="bg-gray-900 text-white py-6 text-center mt-auto">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <p class="text-sm">&copy; <span id="currentYear"></span> CardCompass. For illustrative purposes only.</p>
            <p class="text-xs mt-1">Data last updated: <span id="lastUpdatedDate"></span></p>
        </div>
    </footer>

    <div id="alertModal" class="modal modal-inactive fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full items-center justify-center z-50">
        <div class="relative mx-auto p-5 border w-11/12 sm:w-96 shadow-lg rounded-xl bg-white">
            <div class="mt-3 text-center">
                <h3 id="modalTitle" class="text-lg leading-6 font-medium text-gray-900">Modal Title</h3>
                <div class="mt-2 px-7 py-3">
                    <p id="modalMessage" class="text-sm text-gray-500">Modal message goes here.</p>
                </div>
                <div class="items-center px-4 py-3">
                    <button id="closeModalButton" class="px-4 py-2 bg-violet-600 text-white text-base font-medium rounded-md w-full shadow-sm hover:bg-violet-700 focus:outline-none focus:ring-2 focus:ring-violet-500">
                        OK
                    </button>
                </div>
            </div>
        </div>
    </div>


    <script>
        // --- DATA STORE (Manually Curated for MVP) ---
        const redemptionOptions = [
            {
                id: 2,
                category: "Flights",
                name: "Flight Booking via SmartBuy (Other Airlines)",
                description: "Book various airline flights through HDFC SmartBuy portal.",
                pointsRequired: 10000,
                monetaryValueINR: 7000,
                link: "https://offers.smartbuy.hdfcbank.com/diners/", 
                type: "Direct",
                notes: "Value can be ~Re 0.70 per point or vary. Check SmartBuy for current offers on operational airlines.",
                isPromotion: false,
            },
            {
                id: 3,
                category: "Hotels",
                name: "Hotel Booking via SmartBuy",
                description: "Book hotels through HDFC SmartBuy portal.",
                pointsRequired: 15000,
                monetaryValueINR: 10000,
                link: "https://offers.smartbuy.hdfcbank.com/diners/", 
                type: "Direct",
                notes: "Value can be ~Re 0.67 per point. Rates vary. Check SmartBuy for current hotel offers.",
                isPromotion: false,
            },
            {
                id: 4,
                category: "Shopping Vouchers",
                name: "Amazon Voucher (via SmartBuy/Rewards Catalog)",
                description: "Redeem points for Amazon Pay Gift Card.",
                pointsRequired: 5000,
                monetaryValueINR: 2500,
                link: "https://offers.smartbuy.hdfcbank.com/diners/", 
                type: "Voucher",
                notes: "Typically Re 0.50 per point. Check current denominations and point requirements.",
                isPromotion: false,
            },
            {
                id: 5,
                category: "Shopping Vouchers",
                name: "Flipkart Voucher (via SmartBuy/Rewards Catalog)",
                description: "Redeem points for Flipkart Gift Card.",
                pointsRequired: 5000,
                monetaryValueINR: 2000,
                link: "https://offers.smartbuy.hdfcbank.com/diners/", 
                type: "Voucher",
                notes: "Typically Re 0.40 per point. Check current denominations.",
                isPromotion: false,
            },
            {
                id: 6,
                category: "Cashback",
                name: "Statement Credit",
                description: "Convert points to statement credit.",
                pointsRequired: 10000,
                monetaryValueINR: 2000,
                link: "Accessible via HDFC NetBanking or customer care.", 
                type: "Cashback",
                notes: "Usually the lowest redemption value (e.g., Re 0.20 per point).",
                isPromotion: false,
            },
            {
                id: 8,
                category: "Shopping Vouchers",
                name: "Tanishq Voucher (via SmartBuy/Rewards Catalog)",
                description: "Redeem points for Tanishq Gold/Diamond jewellery voucher.",
                pointsRequired: 10000,
                monetaryValueINR: 7000,
                link: "https://offers.smartbuy.hdfcbank.com/diners/", 
                type: "Voucher",
                notes: "Often good value (Re 0.70 per point). Check current denominations.",
                isPromotion: true, 
            },
            {
                id: 9,
                category: "Hotels",
                name: "Transfer to Accor Live Limitless (ALL) Points",
                description: "Transfer Diners Club Black points to Accor ALL.",
                pointsRequired: 2000,
                monetaryValueINR: 1800,
                transferRatio: "2 DC Points = 1 ALL Point",
                partnerPointValueINR_Note: "1 ALL Point valued at ~Re 1.80 (2000 ALL pts = 40 EUR value)",
                link: "HDFC NetBanking or specific portal for points transfer.", 
                type: "Transfer",
                notes: "Min. transfer may apply. Accor points have fixed value for hotel stays.",
                isPromotion: false,
            }
        ];

        // Pre-calculate redemption rates
        redemptionOptions.forEach(option => {
            if (option.pointsRequired > 0) {
                option.redemptionRate = parseFloat((option.monetaryValueINR / option.pointsRequired).toFixed(3));
            } else {
                option.redemptionRate = 0;
            }
        });

        // --- DOM Elements ---
        const pointsBalanceEl = document.getElementById('pointsBalance');
        const redemptionCategoryEl = document.getElementById('redemptionCategory');
        const findButton = document.getElementById('findRecommendations');
        const resultsSection = document.getElementById('resultsSection');
        const recommendationsListEl = document.getElementById('recommendationsList');
        const resultsTitleEl = document.getElementById('resultsTitle');
        const noResultsMessageEl = document.getElementById('noResultsMessage');
        const lastUpdatedDateEl = document.getElementById('lastUpdatedDate');
        const currentYearEl = document.getElementById('currentYear');
        const alertModalEl = document.getElementById('alertModal');
        const modalTitleEl = document.getElementById('modalTitle');
        const modalMessageEl = document.getElementById('modalMessage');
        const closeModalButtonEl = document.getElementById('closeModalButton');


        // --- APP LOGIC ---
        function populateCategories() {
            const categories = [...new Set(redemptionOptions.map(option => option.category))];
            categories.sort();
            redemptionCategoryEl.innerHTML = '<option value="">-- Select a Category --</option>';
            categories.forEach(category => {
                const optionEl = document.createElement('option');
                optionEl.value = category;
                optionEl.textContent = category;
                redemptionCategoryEl.appendChild(optionEl);
            });
        }

        function displayRecommendations(recommendations) {
            recommendationsListEl.innerHTML = '';
            noResultsMessageEl.classList.add('hidden');

            if (recommendations.length === 0) {
                resultsTitleEl.textContent = 'No Suitable Recommendations Found';
                noResultsMessageEl.textContent = 'Try adjusting your points balance or selecting a different category. Ensure your points cover the required amount for listed options, or the category may have limited options currently.';
                noResultsMessageEl.classList.remove('hidden');
                return;
            }

            resultsTitleEl.textContent = 'Your Top Redemption Options';

            recommendations.forEach((rec, index) => {
                const card = document.createElement('div');
                card.className = `bg-white border border-gray-200 rounded-lg p-4 sm:p-6 shadow-lg hover:shadow-xl transition-shadow duration-300 ${index === 0 ? 'highlight-card' : ''}`;

                let promotionBadge = '';
                if (rec.isPromotion) {
                    promotionBadge = `<span class="absolute top-0 right-0 mt-2 mr-2 bg-yellow-400 text-yellow-800 text-xs font-semibold px-2.5 py-0.5 rounded-full">PROMOTION!</span>`;
                }
                
                let bestValueBadge = '';
                if (index === 0) {
                    // Updated best value badge to violet theme
                    bestValueBadge = `<span class="bg-violet-100 text-violet-700 text-xs font-bold px-3 py-1 rounded-full inline-block mb-2">BEST VALUE</span>`;
                }

                card.innerHTML = `
                    <div class="relative">
                        ${promotionBadge}
                        <h3 class="text-lg sm:text-xl font-semibold text-violet-700 mb-2">${rec.name}</h3>
                        ${bestValueBadge}
                    </div>
                    <p class="text-sm text-gray-600 mb-3">${rec.description}</p>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-2 text-sm mb-4">
                        <p><strong>Points Required:</strong> <span class="font-mono">${rec.pointsRequired.toLocaleString()}</span></p>
                        <p><strong>Monetary Value:</strong> <span class="font-mono">₹${rec.monetaryValueINR.toLocaleString()}</span></p>
                        <p class="sm:col-span-2"><strong>Redemption Rate:</strong> <span class="font-bold text-violet-600 font-mono">₹${rec.redemptionRate.toFixed(2)} per point</span></p>
                        ${rec.type === 'Transfer' ? `
                            <p><strong>Transfer Ratio:</strong> ${rec.transferRatio}</p>
                            <p><strong>Partner Value Note:</strong> ${rec.partnerPointValueINR_Note}</p>
                        ` : ''}
                    </div>
                    ${rec.notes ? `<p class="text-xs text-gray-500 italic bg-gray-50 p-2 rounded-md mb-4">${rec.notes}</p>` : ''}
                    <a href="${rec.link}" target="_blank" rel="noopener noreferrer" class="inline-block bg-violet-500 hover:bg-violet-600 text-white text-sm font-medium py-2 px-4 rounded-md transition duration-150 ease-in-out">
                        Go to Redemption Page &rarr;
                    </a>
                `;
                recommendationsListEl.appendChild(card);
            });
        }

        findButton.addEventListener('click', () => {
            const points = parseInt(pointsBalanceEl.value);
            const category = redemptionCategoryEl.value;

            if (isNaN(points) || points <= 0) {
                showModal('Invalid Input', 'Please enter a valid number of points.');
                pointsBalanceEl.focus();
                return;
            }
            if (!category) {
                showModal('Selection Missing', 'Please select a redemption category.');
                redemptionCategoryEl.focus();
                return;
            }

            const filteredOptions = redemptionOptions.filter(option => {
                return option.category === category && points >= option.pointsRequired;
            });

            filteredOptions.sort((a, b) => {
                if (b.redemptionRate === a.redemptionRate) {
                    return a.pointsRequired - b.pointsRequired;
                }
                return b.redemptionRate - a.redemptionRate;
            });

            displayRecommendations(filteredOptions);
            const resultsElement = document.getElementById('resultsSection');
            if (resultsElement) {
                 resultsElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        });
        
        function showModal(title, message) {
            modalTitleEl.textContent = title;
            modalMessageEl.textContent = message;
            alertModalEl.classList.remove('modal-inactive');
            alertModalEl.classList.add('modal-active');
        }

        function closeModal() {
            alertModalEl.classList.add('modal-inactive');
            alertModalEl.classList.remove('modal-active');
        }

        closeModalButtonEl.addEventListener('click', closeModal);
        alertModalEl.addEventListener('click', (event) => {
            if (event.target === alertModalEl) {
                closeModal();
            }
        });

        function init() {
            populateCategories();
            currentYearEl.textContent = new Date().getFullYear();
            const today = new Date();
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            lastUpdatedDateEl.textContent = today.toLocaleDateString('en-US', options) + " (Violet Theme)";
        }

        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
